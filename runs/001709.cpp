#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>

#define MAX_HEIGHT 70
#define MAX_WIDTH 400
#define LITTLE_SIZE 16
#define FONTS_NUMBER 1

//------------------------------------------
//----------------perceptron----------------
//------------------------------------------
int perceptron(unsigned char *check, unsigned char *etolon)
{
int i;
unsigned short int answer = 0;


for (i = 0; i < LITTLE_SIZE * LITTLE_SIZE; i++)
    answer += abs(*(check + i) - *(etolon + i));

return (answer);
}

//------------------------------------------
//------------------resize------------------
//------------------------------------------
void resize(unsigned char big_pic[MAX_HEIGHT][MAX_WIDTH], int crop_l, int crop_r, int crop_b, unsigned char little_pic[LITTLE_SIZE][LITTLE_SIZE])
{
int rewrite;
unsigned long int pixel;
int x, y, b_x, b_y;	//little x, y & big x, y
int crop_t = 0;	//t - top
int crop_h, crop_w;	//height width
int i, ii, summ = 0;

  //---------------crop detect------------------
  //left
while (1)
    {
    for (i = 0; i <= crop_b; i++)
        summ += big_pic[i][crop_l];
    if (summ != 0)
        break;
    crop_l++;
    }
  //right
summ = 0;
while (1)
    {
    for (i = 0; i <= crop_b; i++)
        summ += big_pic[i][crop_r];
    if (summ != 0)
        break;
    crop_r--;
    }
  //top
summ = 0;
while (1)
    {
    for (i = crop_l; i <= crop_r; i++)
        summ += big_pic[crop_t][i];
    if (summ != 0)
        break;
    crop_t++;
    }
  //bottom
summ = 0;
while (1)
    {
    for (i = crop_l; i <= crop_r; i++)
        summ += big_pic[crop_b][i];
    if (summ != 0)
        break;
    crop_b--;
    }

  //resize pic
for(y = 0; y < LITTLE_SIZE; y++)
    for(x = 0; x < LITTLE_SIZE; x++)
        {
        rewrite = 1;
        b_y = crop_t + (((1 + crop_b - crop_t) * y) / LITTLE_SIZE);
        ii = crop_t + ((1 + crop_b - crop_t) * (y + 1)) / LITTLE_SIZE;
        do
            {
            b_x = crop_l + (((1 + crop_r - crop_l) * x) / LITTLE_SIZE);
            i = crop_l + ((1 + crop_r - crop_l) * (x + 1)) / LITTLE_SIZE;
            do
                {
                summ = rewrite ? (big_pic[b_y][b_x]) :\
                                 ((summ + big_pic[b_y][b_x]) / 2);
                rewrite = 0;
		b_x++;
                }
            while(b_x < i);
            b_y++;
            }
        while(b_y < ii);

	little_pic[y][x] = summ;
        }
}

//-----------------------------------------
//--------------------input----------------
//-----------------------------------------
int input(unsigned char input_array[MAX_HEIGHT][MAX_WIDTH], long int *width, long int *height,long int an_str_h_summ[4][MAX_WIDTH], char *file_addr)
{
*height = 0;
*width = MAX_WIDTH;
  //0 of all chars in string is '.'
short int top_bottom;
short int one_char;
short int i;
FILE *f_handle;

for (i = 0; i < MAX_WIDTH; i++)			//1:0 1:2 1:3 1:6
    {
    an_str_h_summ[0][i] = 0;
    an_str_h_summ[1][i] = 0;
    an_str_h_summ[2][i] = 0;
    an_str_h_summ[3][i] = 0;
    }


  //can`t open file
if (file_addr && (!(f_handle = fopen(file_addr, "r"))))
    return (-1);

do
    {
    if (*height >= MAX_HEIGHT) break;	//to high
    i = 0;
    top_bottom = 0;
    do
        {
        one_char = file_addr ? getc(f_handle) : getchar();
        if (i >= *width) continue;	//to long
        switch (one_char)
            {
            case '.': input_array[*height][i] = 0; i++; break;
            case '%': input_array[*height][i] = 33; top_bottom = 1; i++; break;
            case '#': input_array[*height][i] = 66; top_bottom = 1;
		      an_str_h_summ[0][i]++;
		      if(i + *height/6 < *width)
		          an_str_h_summ[1][i + *height/6]++;
		      else if(i + *height/3 < MAX_WIDTH) 
		          an_str_h_summ[2][i + *height/3]++;
		      else if(i + *height/2 < MAX_WIDTH)
		          an_str_h_summ[3][i + *height/2]++;
		      i++; break;
            case '@': input_array[*height][i] = 100; top_bottom = 1;
		      an_str_h_summ[0][i] += 8;
		      if(i + *height/6 < *width)
		          an_str_h_summ[1][i + *height/6] += 8;
		      if(i + *height/3 < MAX_WIDTH)
		          an_str_h_summ[2][i + *height/3] += 8;
		      if(i + *height/2 < MAX_WIDTH)
		          an_str_h_summ[3][i + *height/2] += 8;
		      i++; break;
            }
        }
    while (one_char != (int)'\n' & one_char > 0);

    if (!top_bottom)	//all elements is '.'
        continue;

    if (!(*height))	//first line lenght
        *width = i;
    (*height)++;
    }
while (one_char > 0);
return 0;
}


//------------------------------------------
//--------------detect element--------------
//------------------------------------------
int det_element(long int an_str_h_summ[4][MAX_WIDTH], long int width, unsigned int element_index, long int element[3])
{
long int i, ii, min_summ[5] = {0, 0, 0, 0, 0};	//1:0 1:2 1:3 1:6
long int elements[4][2] = {0, 0, 0, 0, 0, 0, 0, 0};	//[*][0] - number, [*][1] - len


element[0] = 0;
  //get min delay
for(ii = 0; ii < 4; ii++)
    {
    min_summ[4] = 0;
    for (i=0; i < width; i++)
        if (an_str_h_summ[ii][i] < 8)
            {
            if (elements[ii][1])
                min_summ[4]++;
            }
        else
            {
            elements[ii][1]++;
            if (min_summ[4] != 0)
                {
                elements[ii][0]++;
                if (elements[ii][0] + 1 == element_index)
                    element[0] = i;
                }
            else if (elements[ii][0] + 1 == element_index)
                    element[1] = i - 1;
            if (min_summ[4] > 0 &&\
               (min_summ[ii] > min_summ[4] || min_summ[ii] == 0))
                min_summ[ii] = min_summ[4];
	    min_summ[4] = 0;
            }
    if (min_summ[ii])
        {
        element[2] = ii;
	break;
        }
    }     

if (ii == 4)
    {
    element[0] = 0;
    element[1] = width - 1;
    element[2] = 0;
    }
else
    {
  //come closer
    while(1)
        {
        if (element[0] - 1 >= 0 &&\
            an_str_h_summ[element[2]][element[0]] >\
            an_str_h_summ[element[2]][element[0] - 1])

            element[0]--;
	else
            break;
        }
    while(1)
        {
        if (element[1] + 1 <= width &&\
            an_str_h_summ[element[2]][element[1]] >\
            an_str_h_summ[element[2]][element[1] + 1])

            element[1]++;
	else
            break;
        }
    }

if (element_index <= elements[element[2]][0] + 1)
    return (elements[element[2]][0] + 1);
return (-1);
}

//------------------------------------------
//---------------------main-----------------
//------------------------------------------
int main(int argc, char **argv)
{
  //str height & width
long int width, height;
  //iterator
long int i, ii, iii;
long int res;
unsigned char e_con;
  //array with input word
unsigned char analog_str[MAX_HEIGHT][MAX_WIDTH];	// letter 1:4 - 1:1
unsigned char little_pic[LITTLE_SIZE][LITTLE_SIZE];

long int an_str_h_summ[4][MAX_WIDTH];	//analog str height summ

long int element[3];	//0 - start pos, 1 - stop pos, 2 - naklon
     //0 - numbet, 1 - perceptron answer
unsigned short int digi_element[2] = {0, 16*16*100};



unsigned char element_fonts[FONTS_NUMBER][10][16][16] = {\
  //font 1
  0,  0,  0,  0,  0,  0,  0,  0, 95,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  0, 95,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0, 96, 96, 72,  0,  0,  0,  0,  0,100, 94,  0,  0,  0,
  0,  0, 96, 95,100,  0,  0,  0,  0,  0,  0,  0,100, 96,  0,  0,
  0, 99, 84, 96,  0,  0,  0,  0,  0,  0,  0,  0,  0, 98, 96,  0,
  0, 98, 84, 99,  0,  0,  0,  0,  0,  0,  0,  0,  0, 98, 97,  1,
100, 98, 89,100,  0,  0,  0,  0,  0,  0,  0,  0,  0, 97, 98,100,
100,100, 90,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 87, 98,100,
100,100, 92, 44,  0,  0,  0,  0,  0,  0,  0,  0,  0, 85, 91,100,
100,100, 98, 97,  0,  0,  0,  0,  0,  0,  0,  0,  0, 98, 90,100,
 13, 99, 99,100,  0,  0,  0,  0,  0,  0,  0,  0,  0, 97, 90,  0,
  0,100, 99,100,  0,  0,  0,  0,  0,  0,  0,  0,100, 96, 92,  0,
  0, 67, 99, 99,100,  0,  0,  0,  0,  0,  0,  0,100, 96,  0,  0,
  0,  0, 13, 90, 99,  0,  0,  0,  0,  0,  0,100, 96, 99,  0,  0,
  0,  0,  0,  0, 90,100,  0,  0,  0,  0,  0, 96,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0, 98, 99,100,  0,  0,  0,  0,  0,  0,

  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100,  0,  1, 12,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100,100, 22,
  0,  0,  0,  0,  0,  0,100,100,100,100,100,  0,  0,  0, 22,100,
100,  0,  0,  0,  0,100,100,100,100,100,100,100,  0,  0,  0,100,
  0,  0,  0,  0,100,100,100, 68,100,100,100,100, 26,  0,  0, 75,
  0,  0,  0,  0,  0,  0,  0, 98,100,100,100,100,  0, 72,  0, 75,
  0,  0,  0,  0,  0,  0,  0,  0,100, 26, 73,  1,  9, 96, 98, 86,
  0,  0,  0,  0,  0,  0,  0,  0, 39,  0,  0,  0,  0, 83, 77, 81,
  0,  0,  0,  0,  0,  0,  0,  4,100,  0,  0,  0,  0,  0,  0, 17,
  0,  0,  0,  0,  0,  0,  0, 44,100, 99,100, 99,  0,  0,  0,  1,
  0,  0,  0,  0,  0,  0,  0,  0,100,100,100,100,100,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,100,100,100,100,100,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0, 68,100,100,100,100,100,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0, 81,100,100,100,100,  0,  4,  0,100,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100,100,100,
  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,100,100,100,100,100,

  0,  0,  0,  0,  0,  0,  0,100,  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0,  0, 93, 96, 99, 99, 99, 50,  0,  0,  0,  0,  0,  0,
  0,  0, 82, 89,  0,  0,  0,  0,  0, 85,100,100, 90, 84,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 30,100,100, 91, 60,  0,
 73,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 83,100, 97, 90,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 94, 98, 93,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100, 96, 98,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 92, 77, 20,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 97, 86,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,100, 99,100, 99,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,100,100,100,100,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  0,100,100,100,100,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0,  0,100,100,100,100,  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0, 87, 99,100,100,  0,  0,  0,  0,  0,  0,  0,  0,100,
  0,100, 96, 84, 86, 93, 95,100,100,100, 76, 72, 79,100,100,100,
100,100,100,100, 98, 53,  0, 12, 39,100,100,100,100,100,100,100,

  0,  0,  0,  0,  0,  0, 51,100,100,100,  0,  0,  0,  0,  0,  0,
  0,  0,  7, 97, 93, 97, 99, 99, 99, 99, 83, 91, 92,  0,  0,  0,
  0,100, 94, 90,  0,  0,  0,  0,  0,  0,100,100, 97, 87, 83,  0,
  0,100, 47,  0,  0,  0,  0,  0,  0,  0,  0,  0,100, 91, 92,100,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100, 97, 90,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100,100, 98, 32,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0, 81, 65,  0, 12,  0,  0,  0,
  0,  0,  0,  0,  0, 50,100,100,100,100,100,100, 54,  0,  0,  0,
  0,  0,  0,  0,  0,100,  0,  0,  0,100, 97, 93, 92, 96, 97,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100, 98, 96,100,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 97, 96,100,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 96, 97,100,
 86,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 96,100,  0,
  0,100, 96,  0,  0,  0,  0,  0,  0,  0,  0,  0, 96,100,100,  0,
100,100, 96, 96, 96,  0,  0,  0,  0, 30, 99, 96, 99,  0,  0,  0,
  0,  0,100, 57,  0,  8, 99,  0, 99,  0,  0,  0,  0,  0,  0,  0,

  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 71, 82,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 14,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0, 19, 93,100,100, 27,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,100,100,100,100,100,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0,100,100, 82,100,100,100,  0,  0,  0,  0,
  0,  0,  0,  0,  0, 90, 94, 61, 58, 15, 98,100,100,  0,  0,  0,
  0,  0,  0,  0, 66, 66, 35,  0,  0,  0, 67, 96,100,  0,  0,  0,
  0,  0,  0, 64, 68,  0,  0,  0,  0,  0, 66, 98, 89,  0,  0,  0,
  0,  0,  0, 66, 16,  0,  0,  0,  0,  0, 80, 68, 85,  0,  0,  0,
  0,  0, 79, 97,  0,  0,  0,  0,  0,  0, 90, 99,100,  0,  0,  0,
 96, 80, 71, 22, 96, 64, 34,  0,  0,100,100,100,100,  0,  0,  0,
 88,100,100,100,100,100,100,100,100,100,100,100,100, 45, 14,100,
  0,  0,  0,  0,  0,  0,  3,  2,  0,100,100,100,100,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,100,100,100, 96,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 30, 99,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 94,100,100,  9,  0,  0,

  0,  0,100,100,100, 99, 99,100,100,100, 97,100,100,100,100,100,
  0,  0,100,  0,  0, 25, 19,  0,  0,  0,  0,  0, 92,100,100,  0,
  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0,100,100, 11,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0, 90,100,100,100,100, 77,  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0, 90,100,100,100,100,100,100,100,100,  0,  0,  0,  0,  0,
  0,  0,  0,  0, 82,100,100,100,100,100,100,100, 35, 55,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100, 96, 95, 98,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 75, 96, 97, 19,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100, 98, 96,100,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 97, 96,100,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 86, 97, 13,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 96,  0,  0,
  0,100,  0,  0,  0,  0,  0,  0,  0,  0,  0,100, 96, 59,  0,  0,
 36,100, 96, 96, 77, 72,  0,  0, 50,100, 99,  0,  0,  0,  0,  0,
  0,  0,  0, 18, 98,  0, 99, 66,  0,  0,  0,  0,  0,  0,  0,  0,

  0,  0,  0,  0,  0,  0,  0,  0, 20, 20, 17, 22, 27,100, 87,  0,
  0,  0,  0,  0,  0, 10,  3,  0,  0,  0,  0,  0, 15, 20, 32,  0,
  0,  0,  0,  0, 21, 99, 87, 87, 87,  0,  0,  0,  8, 16, 25,  0,
  0,  0,  0, 20,100, 90, 91,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0, 15,100,100, 87,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0, 96,100, 97,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  0, 99, 97,100,  1,  3,  3,  3, 70, 49,  0, 24,  3,  0,  0,  0,
  0,100, 98, 97, 82, 92, 31, 51, 48, 82, 82, 87, 45, 16, 12,  0,
100,100, 97, 96,  0, 10,  9,  0,  0,  0,  0, 12, 65, 97, 97,  0,
100,100,100, 97, 73,  3,  0,  0,  0,  0,  0,  0, 83, 98, 96,  1,
100,100,100,100,  0,  0,  0,  0,  0,  0,  0,  0,  0, 97, 96,100,
  0,100,100,100,  0,  0,  0,  0,  0,  0,  0,  0,  0, 96, 97,100,
  0,100,100,100,  0,  0,  0,  0,  0,  0,  0,  0, 18, 96,100,  7,
  0,  0, 96, 96, 99, 87,  0,  0,  0,  0,  0,  0, 88,100,100,  0,
  0,  0,  0,  0, 96, 85,  0,  0,  0,  0,  0, 84, 99, 86,  7,  0,
  0,  0,  0,  0,  0,  0,  0, 98, 99,100, 28,  8,  0,  0,  0,  0,

100,100,100,100,100, 99, 96, 99, 93, 97, 95,100,100,100,100,100,
100,100,100, 90, 85, 88, 91, 91, 91, 91, 80, 58, 86,100,100,100,
100,100,  0,  0,  0, 98,100,100,100,100, 98,  0, 83, 82,100,100,
100,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 69, 75, 75,  0,
100,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  6,100, 76,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  6,100,100,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100, 97,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,100, 81,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  5,  0, 86,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0, 21,100, 99, 90,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  1, 50, 92,100,100, 99,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  2, 36, 72,100,100,100,  0,  0,  0,  0,  0,  0,
  0,  0,  0,  0, 27, 26,100,100,100,100,  0,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  8, 49, 95, 93,100,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0, 76,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  0,  3, 13,  0, 78,  0, 92,  0,  0,  0,  0,  0,  0,  0,  0,  0,

  0,  0,  0,  0,  5,  4, 25, 15, 40,  8, 41,  4,  0,  0,  0,  0,
  0,  0,  3, 60, 44, 24, 16, 16, 16, 16, 16, 10,  7,  7,  0,  0,
  0,  4, 69, 74, 80, 12, 12, 12, 12, 12, 12, 12, 18, 75,  6,  0,
  0, 72, 74, 80, 12, 12,  4,  0,  0,  0,  9, 12, 54, 70, 11,  0,
  0, 69, 74, 80, 80, 12,  0,  0,  0,  0,  6, 12, 80, 78,  9,  0,
  0,  0, 74, 80, 80, 80,  4,  0,  0,  0, 10, 80, 80, 66,  0,  0,
  0,  0,  0, 80, 80, 80, 80, 80, 17, 37, 80, 80, 16,  6,  0,  0,
  0,  0,  0,  6, 14, 80, 80, 80, 80, 80, 22, 20,  8,  2,  0,  0,
  0,  4, 16, 12, 76, 80, 76, 60, 57, 72, 71, 74, 11, 13,  2,  0,
  0, 20, 80, 77, 76,  5,  0,  0,  0,  0,  2, 73, 80, 78, 16,  0,
  3, 80, 80, 80, 12,  7,  0,  0,  0,  0,  0, 12, 80, 77, 76,  7,
 68, 80, 80, 16, 12,  7,  0,  0,  0,  0,  0, 12, 16, 40, 62, 73,
 68, 80, 80, 48, 12, 12,  0,  0,  0,  0,  8, 12,  8, 69, 80, 74,
  0, 77, 76, 76,  8, 12, 12,  8,  6,  8, 12,  8,  8, 80, 80,  0,
  0,  0, 48, 76, 76, 15, 14, 18, 20, 20, 16, 16, 69, 80,  4,  0,
  0,  0,  0,  0,  0,  3,  8, 78, 68,  9, 11,  0,  1,  0,  0,  0,

  0,  0,  0,  0,  0,  9,  6, 97,100,  2, 10,  2,  0,  0,  0,  0,
  0,  0,  0, 89,100,  2,  0,  0,  0,  0,  0,  9, 16,  0,  0,  0,
  0,  0,100,100,  0, 11,  0,  0,  0,  0,  0, 89,100,100,  0,  0,
  0,100,100,100,  0,  0,  0,  0,  0,  0,  0, 53, 88,100,100,  0,
 97,100,100,  0,  0,  0,  0,  0,  0,  0,  0,  0, 82,100,100,  6,
100,100,100, 89,  0,  0,  0,  0,  0,  0,  0,  0,  6,100,100,100,
 96,100,100, 98,  0,  0,  0,  0,  0,  0,  0,  0, 54,100,100,100,
  0,100,100,100, 95,  0,  0,  0,  0,  0,  0,  0,100,100,100,100,
  0,  0,100,100,100, 95, 90, 93, 89, 45, 17, 22, 17,100,100,100,
  0,  0,  0, 10,100,100,100,100,100, 10, 10,  4,  0,100,100,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  2, 90, 90,100, 15,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  0,  5, 13, 85, 86, 13, 10,  0,
  0,  0,  0,  0,  0,  0,  0,  0,  5, 48, 85, 82, 43, 15,  0,  0,
  0,  0, 12, 15,  6,  0,  0,  0, 93, 86, 82, 11, 15,  0,  0,  0,
  0,  0, 15, 15, 15,  0, 90, 69,  0,  0,  5, 15,  6,  0,  0,  0,
  0, 91, 96,100,100, 20,  4,  8,  4,  0,  0,  0,  0,  0,  0,  0,
};



if (argc == 1)
    {
    input(analog_str, &width, &height, an_str_h_summ, NULL);

    for(i = 1; i <= 3; i++)
        {
        if (det_element(an_str_h_summ, width, i, element) <= 0) break;
        resize(analog_str, element[0], element[1], height - 1, little_pic);
        digi_element[1] = 16*16*100;
//        output(&little_pic[0][0], LITTLE_SIZE, LITTLE_SIZE, 0);
	for(ii = 0; ii < FONTS_NUMBER; ii++)
            for(iii = 0; iii < 10; iii++)
                {
                res = perceptron(&little_pic[0][0],\
			         &element_fonts[ii][iii][0][0]);
                if (res < digi_element[1])
                    {
                    digi_element[0] = iii;
                    digi_element[1] = res;
                    }
                }
        fprintf(stdout,"%d", digi_element[0]);
        }	 
    fprintf(stdout,"\n");
    }

return 0;
}

